{% extends 'base.html' %}
{% load static %}
{% block title %}COCO - 首頁{% endblock %}

{% block content %}
<style>
  html, body {
    margin: 0;
    padding: 0;
    overflow-x: hidden; /* 防止水平滾動 */
  }

  .carousel {
    margin-top: 0; /* 移除默認頂部間距 */
    padding-top: 0;
  }

  .carousel-item {
    height: 500px; /* 設置輪播圖片的高度 */
    position: relative;
  }

  .fade-in-image {
    width: 100%;
    height: 100%;
    object-fit: cover; /* 圖片填滿容器，保持比例 */
    object-position: center;
  }
    /* 自定義的黑色按鈕樣式 */
  .btn-blue {
    background-color: #637290; /* 按鈕背景黑色 */
    border-color: #637290; /* 邊框顏色 */
    color: #ffffff; /* 文字顏色為白色 */
  }

  
</style>
<!-- Carousel 區域 -->
<div id="myCarousel" class="carousel slide mb-6" data-bs-ride="carousel">
  <div class="carousel-indicators">
    <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
    <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
    <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="2" aria-label="Slide 3"></button>
  </div>
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img src="{% static 'carousel_images/001.png' %}" class="d-block w-100 fade-in-image" alt="First slide">
      <div class="container">
        <div class="carousel-caption text-start fade-in-up">
          <p><a class="btn btn-lg btn-primary animate-button btn-blue" href="#">Sign up today</a></p>
        </div>
      </div>
    
    
    </div>
    <div class="carousel-item">
      <img src="{% static 'carousel_images/002.png' %}" class="d-block w-100 fade-in-image" alt="First slide">
      <div class="container">
        <div class="carousel-caption fade-in-up">

          <p><a class="btn btn-lg btn-primary animate-button btn-blue" href="#">Learn more</a></p>
        </div>
      </div>
    </div>
    <div class="carousel-item">
      <img src="{% static 'carousel_images/004.png' %}" class="d-block w-100 fade-in-image" alt="First slide">
      <div class="container">
        <div class="carousel-caption text-end fade-in-up">
          <p><a class="btn btn-lg btn-primary animate-button btn-blue" href="#">Browse gallery</a></p>
        </div>
      </div>
    </div>
  </div>
  <button class="carousel-control-prev" type="button" data-bs-target="#myCarousel" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Previous</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#myCarousel" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>

<!-- 特色功能區 -->
<div class="icon-boxes py-5 bg-light fade-in-up">
  <div class="container">
    <div class="row row-eq-height">
      <div class="col-md-3 mb-4 d-flex">
        <div class="feature-box p-4 bg-white rounded shadow-sm w-100 animate-card">
          <div class="icon mb-3">
            <i class="fas fa-chalkboard-teacher fa-3x text-primary"></i>
          </div>
          <h4 class="h5 mb-3">贊助媒合機制</h4>
          <p class="text-muted">學生社團與品牌方的精準對接平台，助學生快速尋找資源、品牌高效觸達校園需求，實現雙方共贏。
          </p>
        </div>
      </div>
      <div class="col-md-3 mb-4 d-flex">
        <div class="feature-box p-4 bg-white rounded shadow-sm w-100 animate-card">
          <div class="icon mb-3">
            <i class="fas fa-database fa-3x text-success"></i>
          </div>
          <h4 class="h5 mb-3">智能活動工具</h4>
          <p class="text-muted">AI聊天機器人，為活動方和品牌方提供清晰的活動流程指導。</p>
        </div>
      </div>
      <div class="col-md-3 mb-4 d-flex">
        <div class="feature-box p-4 bg-white rounded shadow-sm w-100 animate-card">
          <div class="icon mb-3">
            <i class="fas fa-graduation-cap fa-3x text-info"></i>
          </div>
          <h4 class="h5 mb-3">搶佔年輕人心智</h4>
          <p class="text-muted">大學校園是培養年輕消費者從「品牌認知」到「品牌忠誠」的關鍵黃金四年。</p>
        </div>
      </div>
      <div class="col-md-3 mb-4 d-flex">
        <div class="feature-box p-4 bg-white rounded shadow-sm w-100 animate-card">
          <div class="icon mb-3">
            <i class="fas fa-chart-line fa-3x text-warning"></i>
          </div>
          <h4 class="h5 mb-3">行銷超值性價比</h4>
          <p class="text-muted">校園社團活動自帶流量優勢，品牌贊助可藉助其影響力，以小預算實現低風險、高曝光的營銷效果。</p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- 活動列表區 -->
<div class="container marketing py-5 fade-in-up">
  <h2 class="text-center mb-4">最新活動</h2>
  <div class="row row-cols-1 row-cols-md-3 g-4">
    {% for activity in activities %}
    {% if activity.check_status%}
      <div class="col">
        <div class="card h-100 shadow-lg rounded border-0 animate-card">
          <img src="{{ activity.image.url }}" class="card-img-top card-img-fade" alt="{{ activity.title }}">
          <div class="card-body">
            <h5 class="card-title text-dark font-weight-bold">
              <a href="{% url 'activity_detail' activity.id %}" class="text-decoration-none text-dark">{{ activity.title }}</a>
            </h5>
            <p class="card-text text-muted">{{ activity.description|truncatewords:20 }}</p>
          </div>
          <ul class="list-group list-group-flush">
            <li class="list-group-item"><i class="fas fa-map-marker-alt me-2"></i>{{ activity.location }}</li>
            <li class="list-group-item"><i class="fas fa-calendar-alt me-2"></i>{{ activity.date }}</li>
          </ul>
          <div class="card-footer bg-transparent">
            <form method="POST" action="{% url 'toggle_activity_favorite' activity.id %}" onsubmit="checkLoginAndFavorite(event, '{% url 'login' %}')">
              {% csrf_token %}
              <button type="submit" class="btn btn-outline-primary btn-sm animate-button">
                {% if activity.is_favorited %}<i class="fas fa-heart"></i> 取消收藏{% else %}<i class="far fa-heart"></i> 收藏{% endif %}
              </button>
            </form>
          </div>
        </div>
      </div>
    {% endif %}
    {% endfor %}
  </div>
  <div class="text-center mt-4">
    <a href="{% url 'activitynew_list' %}" class="btn btn-primary animate-button">查看更多活動</a>
  </div>
</div>

<!-- 最新贊助區 -->
<div class="container marketing py-5 bg-light fade-in-up">
  <h2 class="text-center mb-4">最新贊助</h2>
  <div class="row row-cols-1 row-cols-md-3 g-4">
    {% for sponsorship in sponsorships %}
    {% if sponsorship.check_status%}
      <div class="col">
        <div class="card h-100 shadow-lg rounded border-0 animate-card">
          <img src="{{ sponsorship.image.url }}" class="card-img-top card-img-fade" alt="{{ sponsorship.title }}">
          <div class="card-body">
            <h5 class="card-title text-dark font-weight-bold">
              <a href="{% url 'sponsor_detail' sponsorship.id %}" class="text-decoration-none text-dark">{{ sponsorship.title }}</a>
            </h5>
            <p class="card-text text-muted">{{ sponsorship.description|truncatewords:20 }}</p>
          </div>
          <ul class="list-group list-group-flush">
            <li class="list-group-item"><i class="fas fa-user me-2"></i>{{ sponsorship.sponsor }}</li>
            <li class="list-group-item"><i class="fas fa-dollar-sign me-2"></i>{{ sponsorship.amount }}</li>
            <li class="list-group-item"><i class="fas fa-map-marker-alt me-2"></i>{{ sponsorship.location }}</li>
            <li class="list-group-item"><i class="fas fa-calendar-alt me-2"></i>{{ sponsorship.date_posted }}</li>
          </ul>
          <div class="card-footer bg-transparent">
            <form method="POST" action="{% url 'toggle_sponsorship_favorite' sponsorship.id %}" onsubmit="checkLoginAndFavorite(event, '{% url 'login' %}')">
              {% csrf_token %}
              <button type="submit" class="btn btn-outline-primary btn-sm animate-button">
                {% if sponsorship.is_favorited %}<i class="fas fa-heart"></i> 取消收藏{% else %}<i class="far fa-heart"></i> 收藏{% endif %}
              </button>
            </form>
          </div>
        </div>
      </div>
    {% endif %}
    {% endfor %}
  </div>
  <div class="text-center mt-4">
    <a href="{% url 'sponsorship_list' %}" class="btn btn-primary animate-button">查看更多贊助</a>
  </div>
</div>

<hr class="featurette-divider">
</div>

<style>
  /* General Animation */
  .fade-in-up {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.6s ease, transform 0.6s ease;
  }
  .fade-in-up.active {
    opacity: 1;
    transform: translateY(0);
  }

  /* 卡片陰影與懸浮效果 */
  .animate-card {
    transition: transform 0.3s, box-shadow 0.3s;
  }
  .animate-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
  }

  /* 按鈕動畫 */
  .animate-button {
    transition: transform 0.2s ease, background-color 0.2s;
  }
  .animate-button:hover {
    transform: scale(1.05);
    background-color: #303848;
  }

  /* 卡片圖片淡入效果 */
  .card-img-fade {
    transition: opacity 0.4s ease;
  }
  .card-img-fade:hover {
    opacity: 0.85;
  }
  .carousel {
    margin-top: 77px;
    padding-top: 0;
  }
</style>


<script>
  document.addEventListener('DOMContentLoaded', function() {
    const fadeElems = document.querySelectorAll('.fade-in-up');
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('active');
          observer.unobserve(entry.target);
        }
      });
    }, { threshold: 0.1 });
    fadeElems.forEach(elem => observer.observe(elem));
  });
</script>
{% endblock %}
