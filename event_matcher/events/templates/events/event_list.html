{% extends 'base.html' %}
{% load static %}
{% block title %}COCO - 首頁{% endblock %}

{% block content %}
<!-- Carousel 區域 -->
<div id="myCarousel" class="carousel slide mb-6" data-bs-ride="carousel">
  <div class="carousel-indicators">
    <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
    <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
    <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="2" aria-label="Slide 3"></button>
  </div>
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img src="{% static 'carousel_images/DJI_0728.jpg' %}" class="d-block w-100 fade-in-image" alt="First slide">
      <div class="container">
        <div class="carousel-caption text-start fade-in-up">
          <h1>Example headline.</h1>
          <p>Some representative placeholder content for the first slide of the carousel.</p>
          <p><a class="btn btn-lg btn-primary animate-button" href="#">Sign up today</a></p>
        </div>
      </div>
    </div>
    <div class="carousel-item">
      <img src="{% static 'carousel_images/DJI_0728.jpg' %}" class="d-block w-100 fade-in-image" alt="First slide">
      <div class="container">
        <div class="carousel-caption fade-in-up">
          <h1>Another example headline.</h1>
          <p>Some representative placeholder content for the second slide of the carousel.</p>
          <p><a class="btn btn-lg btn-primary animate-button" href="#">Learn more</a></p>
        </div>
      </div>
    </div>
    <div class="carousel-item">
      <img src="{% static 'carousel_images/DJI_0728.jpg' %}" class="d-block w-100 fade-in-image" alt="First slide">
      <div class="container">
        <div class="carousel-caption text-end fade-in-up">
          <h1>One more for good measure.</h1>
          <p>Some representative placeholder content for the third slide of this carousel.</p>
          <p><a class="btn btn-lg btn-primary animate-button" href="#">Browse gallery</a></p>
        </div>
      </div>
    </div>
  </div>
  <button class="carousel-control-prev" type="button" data-bs-target="#myCarousel" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Previous</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#myCarousel" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>

<!-- 特色功能區 -->
<div class="icon-boxes py-5 bg-light fade-in-up">
  <div class="container">
    <div class="row row-eq-height">
      <div class="col-md-3 mb-4 d-flex">
        <div class="feature-box p-4 bg-white rounded shadow-sm w-100 animate-card">
          <div class="icon mb-3">
            <i class="fas fa-chalkboard-teacher fa-3x text-primary"></i>
          </div>
          <h4 class="h5 mb-3">客製化服務</h4>
          <p class="text-muted">我們很棒很厲害很偉大。</p>
        </div>
      </div>
      <div class="col-md-3 mb-4 d-flex">
        <div class="feature-box p-4 bg-white rounded shadow-sm w-100 animate-card">
          <div class="icon mb-3">
            <i class="fas fa-database fa-3x text-success"></i>
          </div>
          <h4 class="h5 mb-3">豐富的資源</h4>
          <p class="text-muted">我們有原住民的山豬肉</p>
        </div>
      </div>
      <div class="col-md-3 mb-4 d-flex">
        <div class="feature-box p-4 bg-white rounded shadow-sm w-100 animate-card">
          <div class="icon mb-3">
            <i class="fas fa-graduation-cap fa-3x text-info"></i>
          </div>
          <h4 class="h5 mb-3">多元化</h4>
          <p class="text-muted">要幹嘛都可以各式各樣多元化</p>
        </div>
      </div>
      <div class="col-md-3 mb-4 d-flex">
        <div class="feature-box p-4 bg-white rounded shadow-sm w-100 animate-card">
          <div class="icon mb-3">
            <i class="fas fa-chart-line fa-3x text-warning"></i>
          </div>
          <h4 class="h5 mb-3">領先產業</h4>
          <p class="text-muted">跟隨產業發展的最新趨勢。</p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- 活動列表區 -->
<div class="container marketing py-5 fade-in-up">
  <h2 class="text-center mb-4">最新活動</h2>
  <div class="row row-cols-1 row-cols-md-3 g-4">
    {% for activity in activities %}
      <div class="col">
        <div class="card h-100 shadow-lg rounded border-0 animate-card">
          <img src="{{ activity.image.url }}" class="card-img-top card-img-fade" alt="{{ activity.title }}">
          <div class="card-body">
            <h5 class="card-title text-dark font-weight-bold">
              <a href="{% url 'activity_detail' activity.id %}" class="text-decoration-none text-dark">{{ activity.title }}</a>
            </h5>
            <p class="card-text text-muted">{{ activity.description|truncatewords:20 }}</p>
          </div>
          <ul class="list-group list-group-flush">
            <li class="list-group-item"><i class="fas fa-map-marker-alt me-2"></i>{{ activity.location }}</li>
            <li class="list-group-item"><i class="fas fa-calendar-alt me-2"></i>{{ activity.date }}</li>
          </ul>
          <div class="card-footer bg-transparent">
            <form method="POST" action="{% url 'toggle_activity_favorite' activity.id %}" onsubmit="checkLoginAndFavorite(event, '{% url 'login' %}')">
              {% csrf_token %}
              <button type="submit" class="btn btn-outline-primary btn-sm animate-button">
                {% if activity.is_favorited %}<i class="fas fa-heart"></i> 取消收藏{% else %}<i class="far fa-heart"></i> 收藏{% endif %}
              </button>
            </form>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
  <div class="text-center mt-4">
    <a href="#" class="btn btn-primary animate-button">查看更多活動</a>
  </div>
</div>

<!-- 最新贊助區 -->
<div class="container marketing py-5 bg-light fade-in-up">
  <h2 class="text-center mb-4">最新贊助</h2>
  <div class="row row-cols-1 row-cols-md-3 g-4">
    {% for sponsorship in sponsorships %}
      <div class="col">
        <div class="card h-100 shadow-lg rounded border-0 animate-card">
          <img src="{{ sponsorship.image.url }}" class="card-img-top card-img-fade" alt="{{ sponsorship.title }}">
          <div class="card-body">
            <h5 class="card-title text-dark font-weight-bold">
              <a href="{% url 'sponsor_detail' sponsorship.id %}" class="text-decoration-none text-dark">{{ sponsorship.title }}</a>
            </h5>
            <p class="card-text text-muted">{{ sponsorship.description|truncatewords:20 }}</p>
          </div>
          <ul class="list-group list-group-flush">
            <li class="list-group-item"><i class="fas fa-user me-2"></i>{{ sponsorship.sponsor }}</li>
            <li class="list-group-item"><i class="fas fa-dollar-sign me-2"></i>{{ sponsorship.amount }}</li>
            <li class="list-group-item"><i class="fas fa-map-marker-alt me-2"></i>{{ sponsorship.location }}</li>
            <li class="list-group-item"><i class="fas fa-calendar-alt me-2"></i>{{ sponsorship.date_posted }}</li>
          </ul>
          <div class="card-footer bg-transparent">
            <form method="POST" action="{% url 'toggle_sponsorship_favorite' sponsorship.id %}" onsubmit="checkLoginAndFavorite(event, '{% url 'login' %}')">
              {% csrf_token %}
              <button type="submit" class="btn btn-outline-primary btn-sm animate-button">
                {% if sponsorship.is_favorited %}<i class="fas fa-heart"></i> 取消收藏{% else %}<i class="far fa-heart"></i> 收藏{% endif %}
              </button>
            </form>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
  <div class="text-center mt-4">
    <a href="#" class="btn btn-primary animate-button">查看更多贊助</a>
  </div>
</div>

<hr class="featurette-divider">
</div>

<style>
  /* General Animation */
  .fade-in-up {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.6s ease, transform 0.6s ease;
  }
  .fade-in-up.active {
    opacity: 1;
    transform: translateY(0);
  }

  /* 卡片陰影與懸浮效果 */
  .animate-card {
    transition: transform 0.3s, box-shadow 0.3s;
  }
  .animate-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
  }

  /* 按鈕動畫 */
  .animate-button {
    transition: transform 0.2s ease, background-color 0.2s;
  }
  .animate-button:hover {
    transform: scale(1.05);
    background-color: #0056b3;
  }

  /* 卡片圖片淡入效果 */
  .card-img-fade {
    transition: opacity 0.4s ease;
  }
  .card-img-fade:hover {
    opacity: 0.85;
  }
</style>


<script>
  document.addEventListener('DOMContentLoaded', function() {
    const fadeElems = document.querySelectorAll('.fade-in-up');
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('active');
          observer.unobserve(entry.target);
        }
      });
    }, { threshold: 0.1 });
    fadeElems.forEach(elem => observer.observe(elem));
  });
</script>
{% endblock %}
